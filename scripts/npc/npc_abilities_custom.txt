// Dota Heroes File
"DOTAAbilities"
{
	"Version"		"1"
	
	// Rewrite of Skeleton Wraith King Vampiric Aura
	// Author: Noya
	// Date: 12.1.2015.
	// Notes: Using the datadriven Lifesteal Action (shows a +Healed green popup)
	"skeleton_king_vampiric_aura_datadriven"
	{
		// General
		"BaseClass"						"ability_datadriven"
		"AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_NO_TARGET"
		"AbilityType"					"DOTA_ABILITY_TYPE_BASIC"
		"AbilityTextureName"			"skeleton_king_vampiric_aura"

		// Stats
		"AbilityCastPoint"				"0.3 0.3 0.3 0.3"
		"AbilityCooldown"				"20.0 19.0 18.0 17.0"
		"AbilityManaCost"				"25 25 25 25"

		// Precache
		"precache"
		{
			"particle"					"particles/units/heroes/hero_skeletonking/wraith_king_vampiric_aura_lifesteal.vpcf"
		}

		// Special
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"				"FIELD_INTEGER"
				"lifesteal_pct"			"60 80 100 120"
			}
			"02"
			{
				"var_type"				"FIELD_FLOAT"
				"duration"				"8.0 7.0 6.0 5.0"
			}
			"03"
			{
				"var_type"				"FIELD_INTEGER"
				"aura_radius"			"900"
			}
		}

		"OnSpellStart"
		{
			"ApplyModifier"
			{
				"ModifierName"				"modifier_vampiric_aura_datadriven"
				"Target"					"CASTER"
			}
			"ActOnTargets"
			{
				"Target"
				{
					"Center"  				"CASTER"
					"Radius" 				"%aura_radius"
					"Teams" 				"DOTA_UNIT_TARGET_TEAM_FRIENDLY"
					"Types" 				"DOTA_UNIT_TARGET_BASIC"
				}
			
				"Action"    
				{
					"RunScript"
					{
						"ScriptFile"		"heroes/hero_skeleton_king/vampiric_aura.lua"
						"Function"			"VampiricAura"
						"modifier"			"modifier_vampiric_aura_datadriven"
					}
				}
			}
		}
	
		"Modifiers"
		{
			"modifier_vampiric_aura_datadriven"
			{
				"Duration"	"%duration"
				"IsBuff"	"1"

				"EffectName"			"particles/units/heroes/hero_broodmother/broodmother_hunger_buff.vpcf"
				"EffectAttachType"		"follow_origin"

				"OnAttackLanded"
				{
					"Lifesteal"
					{
						"Target"		"CASTER"
						"LifestealPercent"	"%lifesteal_pct"
					}
				}
			}
		}
	}

	"skeleton_king_mortal_strike_datadriven"
	{
		// General
		"BaseClass"						"ability_datadriven"
		"AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_PASSIVE"
		"AbilityTextureName"			"skeleton_king_mortal_strike"
	
		// Precache
		"precache"
		{
			"soundfile"					"soundevents/game_sounds_heroes/game_sounds_skeletonking.vsndevts"
			"particle"					"particles/units/heroes/hero_skeletonking/skeleton_king_weapon_blur_critical.vpcf"
		}
	
		// Stats
		"AbilityCooldown"				"11.0 9.0 7.0 5.0"
			
		// Special
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"				"FIELD_INTEGER"
				"crit_mult"				"150 200 250 300"
			}
		}
	
		"Modifiers"
		{
			"modifier_mortal_strike_datadriven"
			{
				"Passive"				"1"
				"IsHidden"				"1"
	
				"Properties"
				{
					"MODIFIER_PROPERTY_PREATTACK_CRITICALSTRIKE"	"%crit_mult"
				}
	
				"OnAttackLanded"
				{	
					"FireSound"
					{
					  	"EffectName"	"Hero_SkeletonKing.CriticalStrike"
					   	"Target"		"CASTER"
					}
					
					"FireEffect"
					{
						"EffectName" 	"particles/units/heroes/hero_skeletonking/skeleton_king_weapon_blur_critical.vpcf"
					    "EffectAttachType"  "follow_origin"
					    "Target"    	"CASTER"
					}
	
					"RunScript"
					{
						"ScriptFile"	"scripts/vscripts/heroes/hero_skeleton_king/mortal_strike.lua"	
						"Function"		"MortalStrike"
					}
				}
			}
		}
	}
}
